/*!
 * zoomist.js v1.0.0
 * https://github.com/cotton123236/zoomist#readme
 *
 * Copyright 2021-present Wilson Wu
 * Released under the MIT license
 *
 * Date: 2021-11-01T14:43:51.273Z
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Zoomist=e()}(this,(function(){"use strict";var t={src:"data-zoomist-src",mousewheel:!0};const e="zoomist";const i=t=>null!==o(t),o=t=>t instanceof HTMLElement?t:document.querySelector(t),r=(t,e)=>t[e]||t.style[e]||window.getComputedStyle(t).getPropertyValue(e),n=(t,e)=>{for(const[o,r]of Object.entries(e))t.style[o]="number"!=typeof(i=r)||isNaN(i)?r:`${r}px`;var i};return class{constructor(e,r={}){if(!e)throw new Error("The first argument is required.");if(!i(e))throw new Error("This element is not exist.");this.element=o(e),this.options=Object.assign({},t,(t=>{if(!(t=>"object"==typeof t&&null!==t)(t))return!1;try{const{constructor:e}=t,{prototype:i}=e,{hasOwnProperty:o}=Object.prototype;return e&&i&&o.call(i,"isPrototypeOf")}catch(t){return!1}})(r)&&r),this.parent=this.element.parentNode,this.init()}init(){const{element:i,options:o,parent:r}=this;if(i[e])return;i[e]=this;const n=o.src="string"==typeof(s=o.src)&&""!==s?o.src:t.src;var s;const a=i.getAttribute(n);this.create(a)}create(t){if(!t)return;const{element:e,parent:n}=this,{offsetWidth:s,offsetHeight:a}=e;var h;this.url=t,this.data={},this.data.container={width:s,height:a,ratio:s/a,position:"static"===r(e,"position")?"relative":r(e,"position"),top:r(e,"top"),left:r(e,"left"),right:r(e,"right"),bottom:r(e,"bottom"),widthPercentage:s/n.offsetWidth},i(h=e)&&"IMG"===o(h).tagName?e.onload=()=>{const{offsetWidth:t,offsetHeight:i}=e;this.style.container.width=t,this.style.container.height=i,this.mount()}:this.mount()}mount(){if(this.mounted)return;const{data:t}=this,{position:e,top:i,left:o,right:r,bottom:s,width:a,height:h}=t.container,c=document.createElement("div");c.innerHTML=(t=>{const{url:e,style:i}=t;return`\n  <div class="zoomist-wrapper">\n    <img class="zoomist-image" src="${e}" />\n  </div>\n  `})(this),c.classList.add("zoomist-container"),this.container=c,this.wrapper=c.querySelector(".zoomist-wrapper"),this.image=c.querySelector(".zoomist-image");const{naturalWidth:p,naturalHeight:d}=this.image;this.data.image={naturalWidth:p,naturalHeight:d,ratio:p/d};const l=t.container.ratio>t.image.ratio?0:1,f=l?h*t.image.ratio:t.container.width,m=l?t.container.height:a/t.image.ratio;this.data.wrapper={width:f,height:m,ratio:t.image.ratio,left:l?-(f-a)/2:0,top:l?0:-(m-h)/2},n(this.container,{position:e,top:i,left:o,right:r,bottom:s,width:a,height:h}),n(this.wrapper,{width:t.wrapper.width,height:t.wrapper.height,left:t.wrapper.left,top:t.wrapper.top}),(t=>{const{parent:e,data:i}=t,{container:o,wrapper:r}=i;window.addEventListener("resize",(function(){const i=e.offsetWidth*o.widthPercentage,r=i/o.ratio;o.width=i,o.height=r,n(t.container,{width:i,height:r})}))})(this),this.mounted=!0,this.render()}render(){const{element:t,container:e,parent:i}=this;t.classList.add("zoomist-hide"),t.parentNode.insertBefore(e,t.nextSibling)}}}));
